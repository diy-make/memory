{
  "name": "code_generation_policy",
  "description": "Rules for generating code, including commenting conventions.",
  "code_reduction_explanation": {
    "rule": "If a code modification results in a reduction of logic or lines of code by more than 20%, provide a brief explanation for the reduction.",
    "threshold": 0.2
  },
  "metadata_preservation": {
    "rule": "Descriptive comment blocks (like MCP models) at the beginning of files must be preserved during modifications."
  },
  "commenting_conventions": {
    "rule": "All generated code should include context comments.",
    "details": [
      "At the beginning of a module, include a comprehensive outline of the module's purpose, main functions, and overall structure.",
      "Within modules, add comments to explain complex logic, non-obvious decisions, or critical sections of code."
    ]
  },
  "failed_attempt_handling": {
    "description": "Policy for handling failed attempts at generating scripts or code.",
    "rules": [
      "When a script fails, comment out the old code in the same file, add the new corrected code, and at the top of the file, add a JSON object as a multi-line comment that summarizes the learning from the failed attempt, including the error, the fix, and a version number for the attempt."
    ]
  },
  "temporary_scripts_policy": {
    "rule": "Temporary scripts used for recurring tasks should be made permanent and committed to the repository.",
    "rationale": "To prevent loss of work and ensure reusability of automation scripts."
  },
  "html_header_caution": {
    "rule": "Be careful when adding headers to HTML files to not break the HTML structure.",
    "rationale": "To maintain valid HTML and ensure proper rendering."
  },
  "mcp_header_policy": {
    "rule": "All configuration and script files must have an MCP header. This header should be a multi-line comment at the top of the file, containing a JSON object that describes the file's purpose, inputs, outputs, and any other relevant information, such that another agent could reproduce the file from the header.",
    "categories": {
      "include": [
        "Configuration",
        "Scripts"
      ],
      "exclude": [
        "Documentation",
        "Other"
      ]
    }
  },
  "structured_commenting_convention": {
    "rule": "When documenting code, use the structured comment format defined in `domain_specific_knowledge.json`.",
    "format": {
      "title": "[Title] : Heading",
      "section": "[Section] : Section Name",
      "subsection": "[Subsection] : Subsection Name"
    }
  },
  "path_to_scripting": "This JSON file outlines the overarching policies for code generation. It is not a single script, but rather a set of guidelines that are enforced through a combination of automated scripts, linters, and LLM-driven code review processes. The individual sub-policies within this file (e.g., `code_reduction_explanation`, `metadata_preservation`, `commenting_conventions`) would each have their own specific scripting paths."
}