{
  "name": "command_interpretation",
  "strategy": "ordered_fallback_with_mcp",
  "steps": [
    "If the prompt is '$$', list all available aliases from .gemini/mcp.json.",
    "If the prompt is '$', list all available shell commands and aliases from .gemini/mcp.json.",
    "If the prompt starts with '$' or is enclosed in backticks (`), treat it as a command and extract the command name and arguments.",
    "  - First, attempt to execute it as a direct shell command.",
    "  - If it is not a shell command, look up the command name as an alias in .gemini/mcp.json.",
    "    - If a matching alias is found:",
    "If the alias 'action' is 'create_json_punchcard', generate a summary of the current session's activities and the user's contributions. Use this summary to populate the 'title' and 'achieved' fields of a new rich JSON punchcard file in the 'target_directory'. Other fields will be initialized with default or placeholder values.",
    "      - If the alias 'action' is 'execute_prompt', execute the 'prompt' value as a shell command.",
    "If none of the above conditions are met, treat the entire prompt as a natural language request."
  ]
}
